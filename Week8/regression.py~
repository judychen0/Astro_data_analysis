import numpy as np
import matplotlib.pyplot as plt
from kapteyn import kmpfit

data = pf.getdata('Simple_mass_metallicity_210927.fits', 1)
x_all = data['mass'].astype('float64')
y_all = data['OH'].astype('float64')

def residual(p, data):
    x, y = data
    a, b = p
    return(y-(a*x*x+b*x))

fitter = kmpfit.Fitter(residual, data=(x_all, y_all))
paramsinit = [70]
fitter.fit(params0 = paramsinit)

print("fit param0 is %0.2f" % fitter.params[0])

